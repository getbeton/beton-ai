# Commit 4.1: Integrate Drop Zone with Dashboard

## Goal
Combine drop zone with dashboard table display

## Dependencies
- Commit 1.2: Implement empty state design
- Commit 2.3: Implement upload progress tracking

## Files Modified
- `frontend/src/app/dashboard/page.tsx`
- `frontend/src/components/upload/DropZone.tsx`

## Implementation Steps

### Step 1: Integrate Drop Zone States
1. **Empty State**: Large, prominent drop zone covering most of dashboard
2. **Populated State**: Smaller drop zone accessible but not dominant
3. **Upload State**: Progress overlay during file processing
4. **Error State**: Error display with retry options

### Step 2: Implement Conditional Rendering
```tsx
// Dashboard layout logic:
{tables.length === 0 ? (
  <EmptyStateWithDropZone />
) : (
  <PopulatedDashboardWithDropZone>
    <TableGrid tables={tables} />
    <CompactDropZone />
  </PopulatedDashboardWithDropZone>
)}
```

### Step 3: Handle File Drops
1. Drop zone only active in designated table area
2. Global drag events to show/hide drop indicators
3. Prevent default browser file handling
4. File validation before upload starts

### Step 4: Update Table List on Upload Success
1. Real-time table list updates when upload completes
2. New table appears at top of list (most recent)
3. Success notification with link to new table
4. Smooth transition from upload to table display

### Step 5: Handle Upload States
1. **Uploading**: Show progress overlay on drop zone
2. **Processing**: Show WebSocket progress tracking
3. **Success**: Update table list and show success message
4. **Error**: Show error message with retry option

## Acceptance Criteria

✅ **Seamless Integration**: Drop zone integrated seamlessly with dashboard
✅ **State-dependent Display**: Empty state shows prominent drop zone, populated shows smaller
✅ **Designated Drop Area**: File drops only work in designated table area
✅ **Smooth Transitions**: Smooth transitions between upload states
✅ **Real-time Updates**: Table list updates immediately after successful upload

## QA Testing Checklist

### Integration Testing
- [ ] Empty state shows large drop zone
- [ ] Populated state shows compact drop zone
- [ ] Drop zone only active in table area
- [ ] Drag events outside table area ignored

### Upload Flow
- [ ] File drop starts upload process
- [ ] Progress shown during upload and processing
- [ ] Success updates table list in real-time
- [ ] New table appears at top of list
- [ ] Error states handled gracefully

## Definition of Done
- [ ] Drop zone fully integrated with dashboard
- [ ] All acceptance criteria met
- [ ] QA testing checklist completed
- [ ] Ready for commit 4.2 (navigation updates) 